# GRUB boot loader configuration

GRUB_DEFAULT="{{ system_grub_default }}"
GRUB_TIMEOUT={{ system_grub_timeout_secs }}
GRUB_DISTRIBUTOR="Arch"
GRUB_CMDLINE_LINUX_DEFAULT="loglevel=3 {{ system_kernel_extra_args }}"
GRUB_CMDLINE_LINUX="{% if system_dmcrypt_enabled %}cryptdevice={{ system_dmcrypt_cryptdevice }} cryptkey={{ system_dmcrypt_cryptkey }} root={{ system_dmcrypt_root }} resume={{ system_dmcrypt_resume }}{% endif %} nowatchdog"

# Preload both GPT and MBR modules so that they are not missed
GRUB_PRELOAD_MODULES="part_gpt part_msdos"

{% if system_dmcrypt_enabled %}
# Enable booting from LUKS encrypted devices
GRUB_ENABLE_CRYPTODISK=y
{% endif %}

# Set to 'countdown' or 'hidden' to change timeout behavior,
# press ESC key to display menu.
GRUB_TIMEOUT_STYLE=hidden

# Use basic console
GRUB_TERMINAL_INPUT=console

# The resolution used on graphical terminal
# note that you can use only modes which your graphic card supports via VBE
# you can see them in real GRUB with the command `vbeinfo'
GRUB_GFXMODE=auto

# Allow the kernel use the same resolution used by grub
GRUB_GFXPAYLOAD_LINUX=keep

{% if system_grub_default == "saved" %}
# Make GRUB remeber the last selection
GRUB_SAVEDEFAULT="true"
{% endif %}